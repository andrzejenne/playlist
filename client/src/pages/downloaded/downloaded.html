<ion-header>
  <ion-navbar>
    <button ion-button menuToggle="menu">
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title>Downloaded</ion-title>
    <ion-buttons end>
      <ion-item>
        <ion-label>Playlist</ion-label>
        <ion-select style="width: 200px;" #playlistSelect [(ngModel)]="playlist" (ionChange)="onPlaylistChange($event)"
                    interface="popover">
          <ion-option *ngFor="let playlist of playlists" [value]="playlist">
            {{playlist.name}}
          </ion-option>
        </ion-select>
      </ion-item>
    </ion-buttons>
  </ion-navbar>
</ion-header>

<ion-content padding>
  <server-manager-component></server-manager-component>

  <ion-list>
    <ion-item *ngFor="let item of downloaded">
      <img item-start [src]="getThumbnailUrl(item)" width="160">
      <h2>{{item.name}}</h2>
      <p *ngIf="item.description">{{item.description}}</p>
      <ion-buttons item-end>
        <button ion-button color="primary" small icon-left clear (click)="addToPlaylist(item)">
          <ion-icon name="list"></ion-icon>
          <span>Add to playlist</span>
        </button>
        <button *ngIf="hasVideo(item)" ion-button color="primary" small icon-left clear (click)="playVideo(item)">
          <ion-icon name="videocam"></ion-icon>
          <span>Play video</span>
        </button>
        <button *ngIf="hasAudio(item)" ion-button color="primary" small icon-left clear (click)="playAudio(item)">
          <ion-icon name="musical-notes"></ion-icon>
          <span>Play audio</span>
        </button>
        <!--<a [href]="'https://www.youtube.com/watch?v='+item.sid" target="_blank" title="preview">-->
        <!--<ion-icon name="search"></ion-icon>-->
        <!--</a>-->
      </ion-buttons>
    </ion-item>
  </ion-list>
</ion-content>
