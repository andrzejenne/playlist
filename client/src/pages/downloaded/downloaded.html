<ion-header>
  <ion-navbar>
    <button ion-button menuToggle="menu">
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title>Downloaded</ion-title>

    <div class="form-group">
      <label>Playlist</label>
      <select #playlistSelect [(ngModel)]="playlist" class="form-control" (ionChange)="onPlaylistChange($event)">
        <option *ngFor="let playlist of playlists" [value]="playlist">{{playlist.name}}</option>
      </select>
    </div>
    <ion-buttons end>
      <!--<ion-item>-->
        <!--<ion-label>Playlist</ion-label>-->
        <!--<ion-select style="width: 200px;" #playlistSelect [(ngModel)]="playlist" (ionChange)="onPlaylistChange($event)"-->
                    <!--interface="popover">-->
          <!--<ion-option *ngFor="let playlist of playlists" [value]="playlist">-->
            <!--{{playlist.name}}-->
          <!--</ion-option>-->
        <!--</ion-select>-->
      <!--</ion-item>-->
    </ion-buttons>
  </ion-navbar>
</ion-header>

<ion-content #content>
  <ion-grid>
    <ion-row *ngIf="player">
      <ion-col style="height: {{video.height}} + 'px">
        <video controls [poster]="video.thumbnail" height="100%">
          <source [src]="video.src" [type]="video.type">
        </video>
        <button ion-button color="danger" (click)="closeVideo()">Close</button>
      </ion-col>
    </ion-row>
    <ion-row style="height: 100%; ">
      <ion-col>
        <ion-content>
          <ion-list>
            <ion-item *ngFor="let item of downloaded">
              <img item-start [src]="getThumbnailUrl(item)" width="160">
              <div item-end>
                <h2>{{item.name}}</h2>
                <p *ngIf="item.description">{{item.description}}</p>
                <ion-buttons end>
                  <button ion-button color="primary" small icon-left clear (click)="addToPlaylist(item)">
                    <ion-icon name="list"></ion-icon>
                    <span>Add to playlist</span>
                  </button>
                  <button *ngIf="hasVideo(item)" ion-button color="primary" small icon-left clear
                          (click)="playVideo(item)">
                    <ion-icon name="videocam"></ion-icon>
                    <span>Play video</span>
                  </button>
                  <button *ngIf="hasAudio(item)" ion-button color="primary" small icon-left clear
                          (click)="playAudio(item)">
                    <ion-icon name="musical-notes"></ion-icon>
                    <span>Play audio</span>
                  </button>
                </ion-buttons>
                <!--<a [href]="'https://www.youtube.com/watch?v='+item.sid" target="_blank" title="preview">-->
                <!--<ion-icon name="search"></ion-icon>-->
                <!--</a>-->
              </div>
            </ion-item>
          </ion-list>
        </ion-content>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>
