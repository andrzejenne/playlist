<ion-header>
  <ion-navbar>
    <button ion-button menuToggle="menu">
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title>Downloaded</ion-title>
    <ion-buttons end>
      <ion-item>
        <ion-label>Playlist</ion-label>
        <ion-select style="width: 200px;" #playlistSelect [(ngModel)]="playlist" (ionChange)="onPlaylistChange($event)"
                    interface="popover">
          <ion-option *ngFor="let playlist of playlists" [value]="playlist">
            {{playlist.name}}
          </ion-option>
        </ion-select>
      </ion-item>
    </ion-buttons>
  </ion-navbar>
</ion-header>

<ion-content padding>
  <ion-list>
    <ion-card *ngFor="let item of downloaded">
      <ion-card-content>
        <ion-card-title>{{item.name}}</ion-card-title>
        <img [src]="getThumbnailUrl(item)" width="160">
        <p *ngIf="item.description" style="max-height: 64px; overflow: hidden;">{{item.description}}</p>
        <ion-buttons>
          <button ion-button color="primary" small icon-left clear (click)="addToPlaylist(item)">
            <ion-icon name="list"></ion-icon>
            <div>Add to playlist</div>
          </button>
          <button *ngIf="hasVideo(item)" ion-button color="primary" small icon-left clear (click)="playVideo(item)">
            <ion-icon name="videocam"></ion-icon>
            <div>Play video</div>
          </button>
          <button *ngIf="hasAudio(item)" ion-button color="primary" small icon-left clear (click)="playAudio(item)">
            <ion-icon name="musical-notes"></ion-icon>
            <div>Play audio</div>
          </button>
          <!--<a [href]="'https://www.youtube.com/watch?v='+item.sid" target="_blank" title="preview">-->
          <!--<ion-icon name="search"></ion-icon>-->
          <!--</a>-->
        </ion-buttons>
      </ion-card-content>
    </ion-card>
  </ion-list>
</ion-content>
