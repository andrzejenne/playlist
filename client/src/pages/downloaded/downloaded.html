<ion-header>
  <ion-navbar>
    <button ion-button menuToggle="menu">
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title left>In Cloud</ion-title>
    <!--<ion-buttons left>-->
    <!--<button ion-button clear>-->
    <!--<ion-icon name="musical-notes"></ion-icon>-->
    <!--Media-->
    <!--</button>-->
    <!--<button ion-button clear>-->
    <!--<ion-icon name="person"></ion-icon>-->
    <!--Artists-->
    <!--</button>-->
    <!--<button ion-button clear>-->
    <!--<ion-icon name="disc"></ion-icon>-->
    <!--Albums-->
    <!--</button>-->
    <!--</ion-buttons>-->
    <ion-buttons end right>
      <button ion-button title="More options" class="primary-button" (click)="tools = !tools">
        <ion-icon name="more"></ion-icon>
      </button>
    </ion-buttons>
  </ion-navbar>
  <ion-toolbar *ngIf="tools">
    <ion-item>
      <ion-icon item-start name="search"></ion-icon>
      <ion-input icon-left type="text" [(ngModel)]="search" (ionChange)="filter()">
      </ion-input>
      <button item-end ion-button clear *ngIf="search" (click)="search=''">
        <ion-icon name="close"></ion-icon>
      </button>
    </ion-item>
  </ion-toolbar>
</ion-header>

<ion-content #content>
  <div ion-fixed style="width: 100%;">
    <div [hidden]="!player" class="video">
      <div [ngStyle]="video?.containerStyle">
        <video #videoPlayer [width]="video?.width" [height]="video?.height"></video>
      </div>
      <button ion-button end clear (click)="closeVideo()">
        <ion-icon name="close"></ion-icon>
        Close Video
      </button>
    </div>
  </div>

  <ion-list [virtualScroll]="list" approxItemHeight="100px">
    <div *virtualItem="let item" class="list-item">
      <medium-component [item]="item"
                        [selected]="selector.isSelected(item)"
                        (select)="selector.toggleSelect(item)"
                        (toPlaylist)="addToPlaylist(item)"
                        [hasPlaylist]="playlist"
                        [hasVideo]="mediaManager.hasVideo(item)"
                        [hasAudio]="mediaManager.hasAudio(item)"
                        [thumbnail]="mediaManager.getThumbnailUrl(item)"
                        [landscape]="platform.isLandscape()"
                        (play)="playMedia(item)"></medium-component>
    </div>
    <!--<ion-item *virtualItem="let item">-->
      <!--<ion-thumbnail item-start [class.selected]="selector.isSelected(item)" (tap)="selector.toggleSelect(item)">-->
        <!--&lt;!&ndash;<ion-img [src]="mediaManager.getThumbnailUrl(item)" class="fit-thumbnail"></ion-img>&ndash;&gt;-->
        <!--<img [src]="mediaManager.getThumbnailUrl(item)" class="fit-thumbnail">-->
        <!--<ion-icon *ngIf="selector.isSelected(item)" name="checkmark"></ion-icon>-->
      <!--</ion-thumbnail>-->

      <!--<div class="item-content">-->
        <!--<div *ngIf="item.artist" class="artist">-->
          <!--<ion-icon name="person"></ion-icon>-->
          <!--{{item.artist.name}}-->
        <!--</div>-->
        <!--<div *ngIf="item.album" class="album">-->
          <!--<ion-icon name="disc"></ion-icon>-->
          <!--{{item.album.name}}-->
        <!--</div>-->


        <!--<h2>{{item.name}}</h2>-->
        <!--&lt;!&ndash;<p *ngIf="item.description">{{item.description}}</p>&ndash;&gt;-->
        <!--<ion-buttons end>-->
          <!--<button ion-button color="primary" small icon-left clear (click)="addToPlaylist(item)">-->
            <!--<ion-icon name="list"></ion-icon>-->
            <!--<span *ngIf="isLandscape()">Add to playlist</span>-->
          <!--</button>-->
          <!--<button *ngIf="mediaManager.hasVideo(item)" ion-button color="primary" small icon-left clear-->
                  <!--(click)="playMedia(item)">-->
            <!--<ion-icon name="videocam"></ion-icon>-->
            <!--<span *ngIf="isLandscape()">Play video</span>-->
          <!--</button>-->
          <!--<button *ngIf="mediaManager.hasAudio(item)" ion-button color="primary" small icon-left clear-->
                  <!--(click)="playMedia(item)">-->
            <!--<ion-icon name="musical-notes"></ion-icon>-->
            <!--<span *ngIf="isLandscape()">Play audio</span>-->
          <!--</button>-->
        <!--</ion-buttons>-->
        <!--&lt;!&ndash;<a [href]="'https://www.youtube.com/watch?v='+item.sid" target="_blank" title="preview">&ndash;&gt;-->
        <!--&lt;!&ndash;<ion-icon name="search"></ion-icon>&ndash;&gt;-->
        <!--&lt;!&ndash;</a>&ndash;&gt;-->
      <!--</div>-->
    <!--</ion-item>-->
  </ion-list>

  <ion-infinite-scroll (ionInfinite)="doInfinite($event)">
    <ion-infinite-scroll-content></ion-infinite-scroll-content>
  </ion-infinite-scroll>

  <ion-fab right bottom *ngIf="selector.selected.length">
    <button ion-fab color="danger" (tap)="removeSelected()">
      <ion-icon name="trash"></ion-icon>
    </button>
  </ion-fab>
</ion-content>
