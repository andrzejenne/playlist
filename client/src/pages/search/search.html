<ion-header>
    <ion-navbar>
        <button ion-button menuToggle="menu">
            <ion-icon name="menu"></ion-icon>
        </button>
        <ion-searchbar [(ngModel)]="search" (ionFocus)="getSearchHistory(); focused = true;" (ionBlur)="focused = false"></ion-searchbar>
        <ion-buttons end right>
            <button ion-button *ngIf="search && search.length > 1" (click)="onSearchClick()">Search</button>
        </ion-buttons>
        <!--<search-bar (search)="onSearchChange"></search-bar>-->
    </ion-navbar>
</ion-header>

<ion-content padding>
    <ion-list *ngIf="!list.length && history.length" class="history">
        <ion-item *ngFor="let item of history" (click)="searchItems(item.query)">
            {{ item.query }}
            <button ion-button icon-only clear item-end (click)="removeSearchHistory($event, item)">
                <ion-icon name="trash" color="danger"></ion-icon>
            </button>
        </ion-item>
    </ion-list>

    <ion-list *ngIf="list && list.length" class="items">
        <ion-card *ngFor="let item of list">
            <img [src]="item.thumbnail">
            <span class="duration">{{item.duration | duration}}</span>
            <ion-card-content>
                <ion-card-title>{{item.title}}</ion-card-title>
                <p style="height: 64px; overflow: hidden;">{{item.description}}</p>
                <div class="actions">
                    <a (click)="getInfo($event, item)">
                      <ion-icon name="information-circle"></ion-icon>
                    </a>
                    <a (click)="download($event, item)">
                      <ion-icon name="download"></ion-icon>
                    </a>
                    <a [href]="'https://www.youtube.com/watch?v='+item.sid" target="_blank" title="preview">
                      <ion-icon name="search"></ion-icon>
                    </a>
                </div>
            </ion-card-content>
        </ion-card>
    </ion-list>
    <button ion-button *ngIf="prevPageToken" (click)="onPrevClick()" style="float:left;">Prev</button>
    <button ion-button *ngIf="nextPageToken" (click)="onNextClick()" style="float:right;">Next</button>
</ion-content>
