<ion-header>
    <ion-navbar>
        <button ion-button menuToggle="menu">
            <ion-icon name="menu"></ion-icon>
        </button>
        <ion-searchbar [(ngModel)]="search" (ionFocus)="getSearchHistory(); focused = true;" (ionBlur)="focused = false" (ionInput)="searchItems()" [debounce]="500"></ion-searchbar>
        <ion-buttons end right>
            <button ion-button *ngIf="search && search.length > 1" (click)="onSearchClick">Search</button>
            <button ion-button (click)="onLogoutClick" color="danger" round icon-start>
                <ion-icon name="log-out"></ion-icon>
                Logout
            </button>
        </ion-buttons>
        <!--<search-bar (search)="onSearchChange"></search-bar>-->
    </ion-navbar>
</ion-header>

<ion-content padding>
    <!--<ion-card *ngIf="userData">-->
        <!--<ion-card-content>-->
            <!--&lt;!&ndash;<pre>{{userData|json}}</pre>&ndash;&gt;-->
            <!--<img class="profile-img" [hidden]="!userData" [src]="userData.avatar" />-->
            <!--<h1>{{userData.name}}</h1>-->
            <!--<p>{{userData.email}}</p>-->
        <!--</ion-card-content>-->
    <!--</ion-card>-->

    <ion-list *ngIf="!list.length && history.length" class="history">
        <ion-item *ngFor="let item of history" (click)="searchItems(item.query)">
            {{ item.query }}
            <button ion-button icon-only clear item-end (click)="removeSearchHistory($event, item)">
                <ion-icon name="trash" color="danger"></ion-icon>
            </button>
        </ion-item>
    </ion-list>

    <ion-list *ngIf="list && list.length" class="items">
        <ion-card *ngFor="let item of list">
            <img [src]="item.thumbnail">
            <span class="duration">{{item.duration | duration}}</span>
            <ion-card-content>
                <ion-card-title>{{item.title}}</ion-card-title>
                <p style="height: 64px; overflow: hidden;">{{item.description}}</p>
                <div class="actions">
                    <ion-icon name="information-circle" (click)="getInfo($event, item)"></ion-icon>
                    <ion-icon name="download" (click)="download($event, item)"></ion-icon>
                </div>
            </ion-card-content>
        </ion-card>

        <!--<ion-item *ngFor="let item of list">-->
            <!--&lt;!&ndash;<ion-thumbnail item-start>&ndash;&gt;-->
            <!--<div item-start style="width:80px; height: 80px; background-position: center center" [style.backgroundImage]="'url('+item.thumbnail+')'"></div>-->
                <!--&lt;!&ndash;<ion-img item-start [src]="item.thumbnail" [width]="200"></ion-img>&ndash;&gt;-->
            <!--&lt;!&ndash;</ion-thumbnail>&ndash;&gt;-->
            <!--<h2>{{ item.title }}</h2>-->
            <!--<p style="height: 64px; overflow: hidden;">{{ item.description }}</p>-->
            <!--<button ion-button clear item-end>Play</button>-->
        <!--</ion-item>-->
    </ion-list>
    <button ion-button *ngIf="prevPageToken" (click)="onPrevClick()" style="float:left;">Prev</button>
    <button ion-button *ngIf="nextPageToken" (click)="onNextClick()" style="float:right;">Next</button>

    <ion-list>
        <ion-list-header>Download Queue</ion-list-header>

        <ion-item *ngFor="let item of downloads" [ngClass]="{started: item.started, finished: item.finished}">
            <ion-thumbnail item-start>
                <img [src]="item.thumbnail" class="fit-thumbnail">
            </ion-thumbnail>
            <h2>
                {{item.title}}
            </h2>
            <p *ngFor="let file of item.files">
                {{file.name}}
                {{file.progress}}%
            </p>
            <ion-spinner *ngIf="!item.finished" item-end name="bubbles"></ion-spinner>
            <ion-icon *ngIf="item.finished" item-end name="checkmark" large color="primary"></ion-icon>
        </ion-item>
    </ion-list>
</ion-content>
